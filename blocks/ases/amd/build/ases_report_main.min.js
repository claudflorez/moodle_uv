define(["jquery","block_ases/jszip","block_ases/pdfmake","block_ases/jquery.dataTables","block_ases/dataTables.autoFill","block_ases/dataTables.buttons","block_ases/buttons.html5","block_ases/buttons.flash","block_ases/buttons.print","block_ases/bootstrap","block_ases/sweetalert2"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){var b=a("#form_general_report").serializeArray();b.push({name:"instance_id",value:m()}),a("#div_table").html('<img class="icon-loading" src="../icon/loading.gif"/>'),a.ajax({type:"POST",data:b,url:"../managers/ases_report/asesreport_server_processing.php",success:function(b){a("#div_table").html(""),a("#div_table").fadeIn(1e3).append('<table id="tableResult" class="display" cellspacing="0" width="100%"><thead> </thead></table>'),a("#tableResult").DataTable(b),a("#tableResult tr").each(function(){a.each(this.cells,function(){"Bajo"==a(this).html()?a(this).addClass("riesgo_bajo"):"Medio"==a(this).html()?a(this).addClass("riesgo_medio"):"Alto"==a(this).html()&&a(this).addClass("riesgo_alto")})}),a("#tableResult").bind("DOMSubtreeModified",function(){a("#tableResult tr").each(function(){a.each(this.cells,function(){"Bajo"==a(this).html()?a(this).addClass("riesgo_bajo"):"Medio"==a(this).html()?a(this).addClass("riesgo_medio"):"Alto"==a(this).html()&&a(this).addClass("riesgo_alto")})})})},dataType:"json",cache:"false",error:function(a){alert("Error al conectar con el servidor")}})}function m(){var a=location.search.split("&");for(x in a)if(a[x].indexOf("instanceid")>=0){var b=a[x].split("=");return b[1]}return 0}return{init:function(){window.JSZip=b,a("#send_form_btn").on("click",function(){l();var b=a("#conditions").val();"TODOS"==b?(a("#div-summary-spp").prop("hidden",!1),a("#div-summary-spe").prop("hidden",!1),a("#div-summary-3740").prop("hidden",!1),a("#div-summary-oa").prop("hidden",!1)):"TODOS-SPP"==b||"SPP"==b.substring(0,3)?(a("#div-summary-spp").prop("hidden",!1),a("#div-summary-spe").prop("hidden",!0),a("#div-summary-3740").prop("hidden",!0),a("#div-summary-oa").prop("hidden",!0)):"TODOS-SPE"==b||"SPE"==b.substring(0,3)?(a("#div-summary-spp").prop("hidden",!0),a("#div-summary-spe").prop("hidden",!1),a("#div-summary-3740").prop("hidden",!0),a("#div-summary-oa").prop("hidden",!0)):"TODOS-3740"==b||"3740"==b.substring(0,4)?(a("#div-summary-spp").prop("hidden",!0),a("#div-summary-spe").prop("hidden",!0),a("#div-summary-3740").prop("hidden",!1),a("#div-summary-oa").prop("hidden",!0)):"TODOS-OTROS"==b&&(a("#div-summary-spp").prop("hidden",!0),a("#div-summary-spe").prop("hidden",!0),a("#div-summary-3740").prop("hidden",!0),a("#div-summary-oa").prop("hidden",!1))}),a(document).on("click","#tableResult tbody tr td",function(){var b="student_profile.php",c=a("#tableResult").DataTable(),d=c.cell(this).index().column;d<=2&&(a("#formulario").each(function(){this.reset}),location.href=b+location.search+"&student_code="+c.cell(c.row(this).index(),0).data())}),a("#contact_fields_check").on("change",function(){a("#contact_fields_check").prop("checked")?a("#contact_fields input[type='checkbox']").prop("checked",!0):a("#contact_fields input[type='checkbox']").prop("checked",!1)}),a("#status_fields_check").on("change",function(){a("#status_fields_check").prop("checked")?a("input[name='status_fields[]']").prop("checked",!0):a("input[name='status_fields[]']").prop("checked",!1)}),a("#academic_fields_check").on("change",function(){a("#academic_fields_check").prop("checked")?a("input[name='academic_fields[]']").prop("checked",!0):a("input[name='academic_fields[]']").prop("checked",!1)}),a("#risk_fields_check").on("change",function(){a("#risk_fields_check").prop("checked")?a("input[name='risk_fields[]']").prop("checked",!0):a("input[name='risk_fields[]']").prop("checked",!1)}),a("#assignment_fields_check").on("change",function(){a("#assignment_fields_check").prop("checked")?a("input[name='assignment_fields[]']").prop("checked",!0):a("input[name='assignment_fields[]']").prop("checked",!1)}),a(document).on("change",".select_risk",function(){var b=a("#tableResult").DataTable(),c=a(this).parent().index()+1;a(this).parent().find(":selected").text();b.columns(c-1).search(this.value).draw()}),a(document).on("change",".filter_assignments",function(){var b=a("#tableResult").DataTable(),c=a(this).parent().index()+1;a(this).parent().find(":selected").text();b.columns(c-1).search(this.value).draw()}),a(document).on("change",".select_filter_statuses",function(){var b=a("#tableResult").DataTable(),c=a(this).parent().index()+1;a(this).parent().find(":selected").text();b.columns(c-1).search(this.value).draw()}),a(document).on("click",".summary-title",function(){var b=a(a(this).data("icon"));b.hasClass("glyphicon-chevron-right")?(b.removeClass("glyphicon-chevron-right"),b.addClass("glyphicon-chevron-down")):(b.addClass("glyphicon-chevron-right"),b.removeClass("glyphicon-chevron-down"));var c=a(a(this).data("target"));"none"!=c.css("display")?c.hide(300):c.show(300)}),a(".panel-heading-summary").on("click",function(){var b=a(this).find(".icon-group-cohort");b.hasClass("glyphicon-chevron-right")?(b.removeClass("glyphicon-chevron-right"),b.addClass("glyphicon-chevron-down")):(b.addClass("glyphicon-chevron-right"),b.removeClass("glyphicon-chevron-down"));var c=a(a(this).data("target"));"none"!=c.css("display")?c.hide(300):c.show(300)})},load_defaults_students:function(b){a("#div_table").html(""),a("#div_table").fadeIn(1e3).append('<table id="tableResult" class="stripe row-border order-column" cellspacing="0" width="100%"><thead> </thead></table>'),a("#tableResult").DataTable(b)},create_table:function(){},get_id_instance:function(){var a=location.search.split("&");for(x in a)if(a[x].indexOf("instanceid")>=0){var b=a[x].split("=");return b[1]}return 0}}});