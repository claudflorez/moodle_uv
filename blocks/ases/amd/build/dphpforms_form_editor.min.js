'use strict';define(['jquery','block_ases/bootstrap','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2'],function(a){return{init:function init(){function f(g){for(var h=g.indexOf('?'),j='',k=h;k<g.length;k++)j+=g[k];return j.replace(/#[a-zA-z]+_[a-zA-z]+/i,'')}a('#dphpforms-redirect-new-form').click(function(){window.location.href='dphpforms_form_builder.php'+f(window.location.href)}),a('#dphpforms-redirect-adm-alias').click(function(){window.location.href='dphpforms_alias_editor.php'+f(window.location.href)}),a('#dphpforms-redirect-adm-forms').click(function(){window.location.href='dphpforms_form_editor.php'+f(window.location.href)}),a('#dphpforms-redirect-new-pregu').click(function(){window.location.href='dphpforms_form_creator_pregunta.php'+f(window.location.href)+'&form_id='+a(this).attr('data-form-id')}),a('#dphpforms-redirect-adm-disparadores').click(function(){window.location.href='dphpforms_form_editor_comportamientos.php'+f(window.location.href)+'&form_id='+a(this).attr('data-form-id')}),a('.btn-editor-form').click(function(){window.location.href='dphpforms_form_editor_preguntas.php'+f(window.location.href)+'&form_id='+a(this).attr('data-form-id')}),a('.btn-editor-permiso').click(function(){window.location.href='dphpforms_form_editor_permiso.php'+f(window.location.href)+'&permiso_id='+a(this).attr('data-permiso-id')}),a('.btn-editor-pregunta').click(function(){window.location.href='dphpforms_form_editor_pregunta.php'+f(window.location.href)+'&pregunta_id='+a(this).attr('data-pregunta-id')}),a('#actualizar-permiso').click(function(){var g=a(this).attr('data-permiso-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando este permiso, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(h){h&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_permiso',permiso_id:g,permisos:a('#permisos').val()}),success:function success(j){j=JSON.parse(j),0==j.status?alert('Actualizado'):-1==j.status&&alert('Permiso vacio o inexistente')},error:function error(j,k,l){alert('Informe de este error'),console.log('some error '+k+' '+l),console.log(j)}})})}),a('#actualizar-enunciado').click(function(){var g=a(this).attr('data-pregunta-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando el enunciado, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(h){h&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_pregunta_enunciado',pregunta_id:g,enunciado:a('#enunciado').val()}),success:function success(j){j=JSON.parse(j),0==j.status?alert('Actualizado'):-1==j.status&&alert('Pregunta inexistente')},error:function error(j,k,l){alert('Informe de este error'),console.log('some error '+k+' '+l),console.log(j)}})})}),a('#actualizar-atributos').click(function(){var g=a(this).attr('data-pregunta-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando los atributos, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(h){h&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_pregunta_atributos',pregunta_id:g,atributos:a('#atributos').val()}),success:function success(j){j=JSON.parse(j),0==j.status?alert('Actualizado'):-1==j.status&&alert('Pregunta inexistente')},error:function error(j,k,l){alert('Informe de este error'),console.log('some error '+k+' '+l),console.log(j)}})})}),a('#actualizar-opciones').click(function(){var g=a(this).attr('data-pregunta-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 las opciones de esta pregunta, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(h){h&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_pregunta_opciones',pregunta_id:g,opciones:a('#opciones').val()}),success:function success(j){j=JSON.parse(j),console.log(j),0==j.status?alert('Actualizado'):-1==j.status&&alert('Pregunta inexistente')},error:function error(j,k,l){alert('Informe de este error'),console.log('some error '+k+' '+l),console.log(j)}})})}),a('#registrar-pregunta').click(function(){var g=a(this).attr('data-form-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 registrando una nueva pregunta en el formulario, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Crear!'},function(h){h&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'create_pregunta',form_id:g,json_pregunta:a('#json_pregunta').val()}),success:function success(j){j=JSON.parse(j),console.log(j),0==j.status?(alert('Creada'),a('#json_pregunta').val('')):-1==j.status&&alert('Formulario inexistente o JSON-pregunta vacio')},error:function error(j,k,l){alert('Informe de este error'),console.log('some error '+k+' '+l),console.log(j)}})})}),a('#actualizar-orden').click(function(){var g=a(this).attr('data-form-id');console.log('FormID: '+g),swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando el orden de las pregunta, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(h){h&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_positions',form_id:g,ordenamiento:a('#ordenamiento').val()}),success:function success(j){console.log(j)},error:function error(j,k,l){alert('Informe de este error'),console.log('some error '+k+' '+l),console.log(j)}})})}),a('.btn-remove-form').click(function(){var g=a(this).attr('data-form-name'),h=a(this).attr('data-form-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 eliminando el formulario <strong><i>'+g+'</i></strong>, \xBFdesea continuar?, tenga en consideraci\xF3n que los alias asociados a las preguntas del formulario no ser\xE1n eliminados.',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Eliminar!'},function(j){j&&a.get('../managers/dphpforms/dphpforms_form_updater.php?function=delete_form&id_form='+h,function(k){var l=k;0==l.status?swal({title:'Informaci\xF3n',text:'Eliminado',type:'success'},function(){window.location.href=window.location.href}):-1==l.status&&swal('Error!',l.message,'error')})})}),a('.btn-remove-alias').click(function(){var g=a(this).attr('data-form-alias'),h=a(this).attr('data-form-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 eliminando el alias <strong><i>'+g+'</i></strong>, \xBFdesea continuar?, tenga en consideraci\xF3n que cualquier consulta que haga uso de este alias dejar\xE1 de funcionar.',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Eliminar!'},function(j){j&&a.get('../managers/dphpforms/dphpforms_form_updater.php?function=delete_alias&id_alias='+h,function(k){var l=k;0==l.status?swal({title:'Informaci\xF3n',text:'Eliminado',type:'success'},function(){window.location.href=window.location.href}):-1==l.status&&swal('Error!',l.message,'error')})})}),a('#actualizar-disparadores').click(function(){var g=a(this).attr('data-disparadores-id');swal({html:!0,title:'Confirmaci\xF3n',text:'<strong>Nota importante!</strong>: Est\xE1 actualizando este disparador de comportamientos, \xBFdesea continuar?',type:'warning',showCancelButton:!0,confirmButtonText:'S\xED, Actualizar!'},function(h){h&&a.ajax({method:'POST',url:'../managers/dphpforms/dphpforms_form_updater.php',contentType:'application/json',dataType:'text',data:JSON.stringify({'function':'update_disparadores',disparadores_id:g,disparadores:a('#disparadores-'+g).val()}),success:function success(j){j=JSON.parse(j),0==j.status?alert('Actualizado'):-1==j.status&&alert('Bloque de disparadores inexistente')},error:function error(j,k,l){alert('Informe de este error'),console.log('some error '+k+' '+l),console.log(j)}})})})}}});