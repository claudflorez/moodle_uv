'use strict';define(['jquery','block_ases/bootstrap','block_ases/d3','block_ases/sweetalert','block_ases/jqueryui','block_ases/select2','block_ases/Chart'],function(a,b,c,d,e,f,g){function h(F){for(F=F.toLowerCase(),i=0;i<F.length;i++)if(-1!='abcdefghyjklmn\xF1opqrstuvwxyz'.indexOf(F.charAt(i),0))return 1;return 0}function k(F){var G=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return G.test(F)?1:0}function q(){var F=a('#modal_dropout'),G=a('.mymodal-close'),H=a('#goback_backdrop');H.on('click',function(){F.hide()}),G.on('click',function(){F.hide()})}function r(){var F=a('#modal_peer_tracking'),G=a('.mymodal-close'),H=a('#cancel_peer_tracking');H.on('click',function(){F.hide()}),G.on('click',function(){F.hide()});var I=a('.panel-heading.heading_semester_tracking');I.on('click',function(){'collapsed'==a(this).parent().attr('class')?(a('h4>span',this).removeClass('glyphicon-chevron-left'),a('h4>span',this).addClass('glyphicon-chevron-down')):(a('h4>span',this).removeClass('glyphicon-chevron-down'),a('h4>span',this).addClass('glyphicon-chevron-left'))})}function s(){var F=a('#modal_risk_span'),G=a('#modal_risk_close');F.on('click',function(){a('#modal_risk_graph').hide()}),G.on('click',function(){a('#modal_risk_graph').hide()})}function t(){a('#date').datepicker({dateFormat:'yy-mm-dd'});for(var F=new Date,G=F.getDate(),H=F.getMonth()+1,I=F.getFullYear(),J=F.getMinutes(),K=F.getHours(),L='',M=0;24>M;M++)M==K?(10>K&&(K='0'+K),L+='<option value="'+K+'" selected>'+K+'</option>'):L+=10>M?'<option value="0'+M+'">0'+M+'</option>':'<option value="'+M+'">'+M+'</option>';for(var N='',M=0;60>M;M++)M==J?(10>J&&(J='0'+J),N+='<option value="'+J+'" selected>'+J+'</option>'):N+=10>M?'<option value="0'+M+'">0'+M+'</option>':'<option value="'+M+'">'+M+'</option>';a('#h_ini').append(L),a('#m_ini').append(N),a('#h_fin').append(L),a('#m_fin').append(N),a('#infomonitor').addClass('hide'),a('#seguimiento').find('input:text, textarea').val(''),a('#seguimiento').find('input:radio,input:checkbox').prop('checked',!1),a('#upd_seg').attr('disabled',!1),a('#upd_seg').attr('title',''),a('#seguimiento').find('select, textarea, input').attr('disabled',!1),a('#no_value_individual').hide(),a('#no_value_familiar').hide(),a('#no_value_academic').hide(),a('#no_value_economic').hide(),a('#no_value_life').hide(),a('#id_tracking_peer').val(''),a('#place').val(''),a('#topic_textarea').val(''),a('#objetivos').val(''),a('#individual').val(''),a('#familiar').val(''),a('#academico').val(''),a('#economico').val(''),a('#vida_uni').val(''),a('#observaciones').val(''),a('#no_value_individual').prop('checked',!0),a('#no_value_familiar').prop('checked',!0),a('#no_value_academic').prop('checked',!0),a('#no_value_economic').prop('checked',!0),a('#no_value_life').prop('checked',!0)}function u(){var F=a('#tracking_peer_form'),G=a('#modal_peer_tracking'),H=F.serializeArray(),I=w(document.location.search),J=v(H);if('success'!=J)swal({title:'Advertencia',text:J,type:'warning',html:!0});else{H.push({name:'func',value:'save_tracking_peer'});var K=a('#id_ases').val();H.push({name:'id_ases',value:K}),H.push({name:'id_instance',value:I.instanceid}),a.ajax({type:'POST',data:H,url:'../../ases/managers/student_profile/studentprofile_serverproc.php',success:function success(L){swal({title:L.title,text:L.msg,type:L.type},function(){G.hide();var M=w(document.location.search);M.tab?location.reload():location.href=location.search+'&tab=socioed_tab'})},dataType:'json',cache:'false',error:function error(L){console.log(L)}})}}function v(F){var G=/^\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])$/,H=G.exec(F[1].value);return''==F[1].value?'Debe introducir la fecha en la cual se realiz\xF3 el seguimiento':null===H?'La fecha no sigue el patr\xF3n yyyy-mm-dd. Ejemplo 2017-10-13':''==F[2].value?'Debe introducir el lugar donde se realiz\xF3 el seguimiento':''==F[7].value?'El campo tema se encuentra vacio':''==F[8].value?'El campo objetivos se encuentra vacio':parseInt(F[5].value)<parseInt(F[3].value)?'La hora de finalizaci\xF3n debe ser mayor a la hora inicial':parseInt(F[3].value)==parseInt(F[5].value)&&parseInt(F[6].value)<=parseInt(F[4].value)?'La hora de finalizaci\xF3n debe ser mayor a la hora inicial':''!=F[9].value&&0==F[10].value?'El riesgo asociado al campo Actividad Invidual no est\xE1 marcado. Si usted escribi\xF3 informaci\xF3n en el campo Actividad Individual debe marcar un nivel de riesgo.':''!=F[11].value&&0==F[12].value?'El riesgo asociado al campo Actividad Familiar no est\xE1 marcado. Si usted escribi\xF3 informaci\xF3n en el campo Actividad Familiar debe marcar un nivel de riesgo.':''!=F[13].value&&0==F[14].value?'El riesgo asociado al campo Actividad Acad\xE9mico no est\xE1 marcado. Si usted escribi\xF3 informaci\xF3n en el campo Actividad Acad\xE9mico debe marcar un nivel de riesgo.':''!=F[15].value&&0==F[16].value?'El riesgo asociado al campo Actividad Econ\xF3mico no est\xE1 marcado. Si usted escribi\xF3 informaci\xF3n en el campo Actividad Econ\xF3mico debe marcar un nivel de riesgo.':''!=F[17].value&&0==F[18].value?'El riesgo asociado al campo Actividad Vida Universitaria no est\xE1 marcado. Si usted escribi\xF3 informaci\xF3n en el campo Actividad Vida Universitaria debe marcar un nivel de riesgo.':''==F[9].value&&0!=F[10].value?'Usted ha marcado el nivel de riesgo asociado a la actividad Individual, debe digitar informaci\xF3n en el campo Actividad Individual. O puede utilizar el icono (<span style=\'color:gray;\' class=\'glyphicon glyphicon-erase\'></span>) de limpiar riesgo.':''==F[11].value&&0!=F[12].value?'Usted ha marcado el nivel de riesgo asociado a la actividad Familiar, debe digitar informaci\xF3n en el campo Actividad Familiar. O puede utilizar el icono (<span style=\'color:gray;\' class=\'glyphicon glyphicon-erase\'></span>) de limpiar riesgo.':''==F[13].value&&0!=F[14].value?'Usted ha marcado el nivel de riesgo asociado a la actividad Acad\xE9mico, debe digitar informaci\xF3n en el campo Actividad Acad\xE9mico. O puede utilizar el icono (<span style=\'color:gray;\' class=\'glyphicon glyphicon-erase\'></span>) de limpiar riesgo.':''==F[15].value&&0!=F[16].value?'Usted ha marcado el nivel de riesgo asociado a la actividad Econ\xF3mico, debe digitar informaci\xF3n en el campo Actividad Econ\xF3mico. O puede utilizar el icono (<span style=\'color:gray;\' class=\'glyphicon glyphicon-erase\'></span>) de limpiar riesgo.':''==F[17].value&&0!=F[18].value?'Usted ha marcado el nivel de riesgo asociado a la actividad Vida Universitaria, debe digitar informaci\xF3n en el campo Actividad Vida Universitaria. O puede utilizar el icono (<span style=\'color:gray;\' class=\'glyphicon glyphicon-erase\'></span>) de limpiar riesgo.':'success'}function w(){for(var K,G=[],H=document.location.search.substring(1),I=H.split('&'),J=0;J<I.length;J++)K=I[J].split('='),G[K[0]]=K[1];return G}function x(F){t();var G=new Date(a('#'+F+' .date_tracking_peer').text()),H=a('#'+F+' .place_tracking_peer').text(),I=a('#'+F+' .init_time_tracking_peer').text(),J=a('#'+F+' .ending_time_tracking_peer').text(),K=a('#'+F+' .topic_tracking_peer').text(),L=a('#'+F+' .objectives_tracking_peer').text(),M=a('#'+F+' .individual_tracking_peer').text(),N=a('#'+F+' .ind_risk_tracking_peer').text(),O=a('#'+F+' .familiar_tracking_peer').text(),P=a('#'+F+' .fam_risk_tracking_peer').text(),Q=a('#'+F+' .academico_tracking_peer').text(),R=a('#'+F+' .aca_risk_tracking_peer').text(),S=a('#'+F+' .economico_tracking_peer').text(),T=a('#'+F+' .econ_risk_tracking_peer').text(),U=a('#'+F+' .lifeu_tracking_peer').text(),V=a('#'+F+' .lifeu_risk_tracking_peer').text(),W=a('#'+F+' .observations_tracking_peer').text(),X={};X.bajo=1,X.medio=2,X.alto=3;var Y=G.getFullYear(),Z=G.getMonth()+1;Y+=10>G.getMonth()?'-0'+Z:'-'+Z,Y+=10>G.getDate()?'-0'+G.getDate():'-'+G.getDate();var _=I.substring(0,2),aa=I.substring(3,5),ba=J.substring(0,2),ca=J.substring(3,5);a('#h_ini option[value="'+_+'"]').attr('selected',!0),a('#m_ini option[value="'+aa+'"]').attr('selected',!0),a('#h_fin option[value="'+ba+'"]').attr('selected',!0),a('#m_fin option[value="'+ca+'"]').attr('selected',!0);var da=X[N.toLowerCase()],ea=X[P.toLowerCase()],fa=X[T.toLowerCase()],ga=X[R.toLowerCase()],ha=X[V.toLowerCase()];''==N?a('input[name=\'riesgo_ind\'][value=\'0\']').prop('checked',!0):a('input[name=\'riesgo_ind\'][value=\''+da+'\']').prop('checked',!0),''==P?a('input[name=\'riesgo_familiar\'][value=\'0\']').prop('checked',!0):a('input[name=\'riesgo_familiar\'][value=\''+ea+'\']').prop('checked',!0),''==T?a('input[name=\'riesgo_econom\'][value=\'0\']').prop('checked',!0):a('input[name=\'riesgo_econom\'][value=\''+fa+'\']').prop('checked',!0),''==R?a('input[name=\'riesgo_aca\'][value=\'0\']').prop('checked',!0):a('input[name=\'riesgo_aca\'][value=\''+ga+'\']').prop('checked',!0),''==V?a('input[name=\'riesgo_uni\'][value=\'0\']').prop('checked',!0):a('input[name=\'riesgo_uni\'][value=\''+ha+'\']').prop('checked',!0),a('#date').val(Y),a('#place').val(H),a('#topic_textarea').val(K),a('#objetivos').val(L),a('#individual').val(M),a('#familiar').val(O),a('#academico').val(Q),a('#economico').val(S),a('#vida_uni').val(U),a('#observaciones').val(W),a('#id_tracking_peer').val(F);var ia=a('#modal_peer_tracking');ia.show()}function y(F){a.ajax({type:'POST',data:{func:'delete_tracking_peer',id_tracking:F},url:'../managers/student_profile/studentprofile_serverproc.php',success:function success(G){swal(G.title,G.msg,G.status);var H=w(document.location.search);H.tab?location.reload():location.href=location.search+'&tab=socioed_tab'},dataType:'json',cache:'false',error:function error(G){swal(G.title,G.msg,G.status)}})}function B(F){a.ajax({type:'POST',data:{func:'is_student',code_student:F},url:'../managers/student_profile/studentprofile_serverproc.php',success:function success(G){if('1'==G){var H=w(document.location.search),I=document.location+'',J=I.split('?'),K=J[0]+'?courseid='+H.courseid+'&instanceid='+H.instanceid+'&student_code='+F;location.href=K}else swal('Error','No se encuentra un estudiante asociado al c\xF3digo ingresado','error')},dataType:'text',cache:'false',error:function error(){swal('Error','Error al comunicarse con el servidor, por favor intentelo nuevamente.','error')}})}function C(){for(var F=0;F<Object.keys(datos.informacion).length;F++){var G=[],H,I=[],J=[],K=[];H=datos.informacion[F].dimension;for(var L=0;'false'==datos.informacion[F].datos[L].end;)I.push(datos.informacion[F].datos[L].fecha),J.push(datos.informacion[F].datos[L].color),K.push(datos.informacion[F].datos[L].riesgo),++L;G.push(H),G.push(I),G.push(J),G.push(K),datosGraficables.push(G)}}function D(){C();var F=E(datosGraficables[0],ctx_individual),G=E(datosGraficables[1],ctx_familiar),H=E(datosGraficables[2],ctx_academico),I=E(datosGraficables[3],ctx_economico),J=E(datosGraficables[4],ctx_vida_universitaria)}function E(F,G){return new g(G,{type:'line',data:{labels:F[1],datasets:[{label:'Nivel de riesgo',fill:!1,lineTension:0,pointBackgroundColor:F[2],data:F[3],backgroundColor:'black',borderColor:'black',borderWidth:3,pointRadius:5,pointHoverRadius:7}]},options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1,max:3,min:0}}]}}})}return{init:function init(F){a('[data-toggle="tooltip"]').tooltip();var G=w(document.location.search),H=a('.panel-collapse.collapse.in'),I=this;a('#asignados').select2({width:'resolve',height:'resolve',language:{noResults:function noResults(){return'No hay resultado'},searching:function searching(){return'Buscando..'}}}),a('#asignados').on('change',function(){var P=a('#asignados').val(),Q=P.split(' ')[0];B(Q)});for(var J=0,K=F.length;J<K;J++)a('#select-'+F[J].academic_program_id+' option[value='+F[J].program_status+']').attr('selected',!0),'1'==F[J].program_status&&a('#tr-'+F[J].id_moodle_user).addClass('is-active'),'1'==F[J].tracking_status&&a('#div_flags_'+F[J].academic_program_id).prop('checked',!0);var L='',M=a('#div_cohorts').height();a('#div-icon-edit').height(M),this.edit_profile(I),a('div.slider.round').click(function(P){L=P.target.parentElement.children[0].checked}),a('.input-tracking').on('change',{current_tracking_status:L},function(){I.update_tracking_status(L,a(this),F,I)});var N='';switch(a('.select_statuses_program').on('focus',function(P){N=P.target.value}),a('.select_statuses_program').on('change',{current_status:N},function(){I.update_status_program(N,a(this))}),a('#icon-tracking').on('click',function(){I.update_status_ases(G)}),G.tab){case'socioed_tab':a('#general_li').removeClass('active'),a('#socioed_li').addClass('active'),a('#general_tab').removeClass('active'),a('#socioed_tab').addClass('active'),H.removeClass('in'),a('#collapseOne').addClass('in');break;default:H.removeClass('in');}var O=a('#modal_peer_tracking');q(),r(),s(),a('#button_add_track').on('click',function(){a('#save_seg').removeClass('hide'),a('#div_created').addClass('hide'),a('#upd_seg').addClass('hide'),a('#myModalLabel').attr('name','PARES'),O.show(),t()}),a('#view_form_update_profile_image').on('click',function(){a('#profile_image_update').show()}),a('#send-profile-image').on('click',function(){var P=new FormData;P.append('mdl_user_id',a('#id_moodle').val()),P.append('new_image_file',document.getElementById('profile-image-input').files[0]),P.append('func','update_user_image'),a.ajax({url:'../managers/student_profile/studentprofile_serverproc.php',data:P,cache:!1,contentType:!1,processData:!1,method:'POST',type:'POST',success:function success(Q){alert(Q)},error:function error(Q){console.log(Q)}}),console.log(P)}),a('#save_tracking_btn').on('click',function(){u()}),a('fieldset').removeClass('hidden'),a('#clean_individual_risk').on('click',function(){a('#no_value_individual').prop('checked',!0)}),a('#clean_familiar_risk').on('click',function(){a('#no_value_familiar').prop('checked',!0)}),a('#clean_academic_risk').on('click',function(){a('#no_value_academic').prop('checked',!0)}),a('#clean_economic_risk').on('click',function(){a('#no_value_economic').prop('checked',!0)}),a('#clean_life_risk').on('click',function(){a('#no_value_life').prop('checked',!0)}),a('.btn-primary.edit_peer_tracking').on('click',function(){var P=a(this).attr('id'),Q=P.substring(14);x(Q)}),a('.btn-danger.delete_peer_tracking').on('click',function(){var P=a(this).attr('id'),Q=P.substring(21);swal({title:'Advertencia',text:'\xBFEst\xE1 seguro(a) que desea borrar este seguimiento?',type:'warning',showCancelButton:!0,confirmButtonText:'Si',cancelButtonText:'No',closeOnConfirm:!1},function(R){R&&y(Q)})}),a('#view_graph_radial_button').on('click',function(){I.graph_radial()}),a('#view_graphic_risk_button').click(function(){a('#modal_riesgos').fadeIn(200),D()}),a('#mymodal-riesgo-close').click(function(){a('#modal_riesgos').fadeOut(200)})},equalize:function equalize(){a(document).ready(function(){var F=a('.equalize').map(function(){return a(this).height()}).get(),G=Math.max.apply(null,F);a('.equalize').height(G)})},update_status_program:function update_status_program(F,G){var H=G.attr('id').split('-')[1],I=G.val(),J=G.parent().parent().attr('id').split('-')[1],K={func:'update_status_program',program_id:H,status:I,student_id:J};swal({title:'Advertencia',text:'\xBFEst\xE1 seguro que desea cambiar el estado del programa?',type:'warning',showCancelButton:!0,confirmButtonClass:'btn-danger',confirmButtonText:'Si',cancelButtonText:'No',closeOnConfirm:!1},function(L){L?a.ajax({type:'POST',data:K,url:'../managers/student_profile/studentprofile_serverproc.php',success:function success(M){'ACTIVO'==a('#select-'+K.program_id).val()?a('#tr-'+K.student_id).addClass('is-active'):a('#tr-'+K.student_id).removeClass('is-active'),swal(M.title,M.msg,M.status)},dataType:'json',cache:'false',error:function error(M){swal(M.title,M.msg,M.status)}}):a('#select-'+K.program_id).val(F)})},update_status_ases:function update_status_ases(F){var G=a('#input_status_ases').val(),H;switch(G){case'seguimiento':H='sinseguimiento';break;case'sinseguimiento':H='seguimiento';break;case'noasignado':H='seguimiento';break;default:}if('sinseguimiento'==G)swal('Advertencia','No es posible realizar esta acci\xF3n. Al estudiante se le realiza seguimiento desde otra instancia.','warning');else{var I={func:'update_status_ases',current_status:G,new_status:H,instance_id:F.instanceid,code_student:F.student_code};swal({title:'Advertencia',text:'\xBFEst\xE1 seguro que desea cambiar el estado de seguimiento del estudiante en esta instancia? El estado pasar\xE1 de \''+G+'\' a \''+H+'\'',type:'warning',showCancelButton:!0,confirmButtonClass:'btn-danger',confirmButtonText:'Si',cancelButtonText:'No'},function(J){J&&('sinseguimiento'==H?(modal_dropout=a('#modal_dropout'),modal_dropout.show(),a('#save_changes_dropout').on('click',function(){I.id_reason_dropout=a('#reasons_select').val(),I.observation=a('#description_dropout').val(),a.ajax({type:'POST',data:I,url:'../managers/student_profile/studentprofile_serverproc.php',success:function success(K){G=H,a('#input_status_ases').val(H),'seguimiento'==K.previous_status?(a('#icon-tracking').removeClass('i-tracking-t'),a('#icon-tracking').addClass('i-tracking-n'),a('#tip_ases_status').html('Se realiza seguimiento en otra instancia')):'sinseguimiento'==K.previous_status?(a('#icon-tracking').removeClass('i-tracking-f'),a('#icon-tracking').addClass('i-tracking-t'),a('#tip_ases_status').html('Se realiza seguimiento en esta instancia')):''==K.previous_status&&(a('#icon-tracking').removeClass('i-tracking-n'),a('#icon-tracking').addClass('i-tracking-t'),a('#tip_ases_status').html('No se realiza seguimiento')),modal_dropout.hide(),swal(K.title,K.msg,K.status)},dataType:'json',cache:'false',error:function error(K){modal_dropout.hide(),swal(K.title,K.msg,K.status)}})})):'seguimiento'==H&&a.ajax({type:'POST',data:I,url:'../managers/student_profile/studentprofile_serverproc.php',success:function success(K){G=H,a('#input_status_ases').val(H),'seguimiento'==K.previous_status?(a('#icon-tracking').removeClass('i-tracking-t'),a('#icon-tracking').addClass('i-tracking-n'),a('#tip_ases_status').html('Se realiza seguimiento en otra instancia')):'sinseguimiento'==K.previous_status?(a('#icon-tracking').removeClass('i-tracking-f'),a('#icon-tracking').addClass('i-tracking-t'),a('#tip_ases_status').html('Se realiza seguimiento en esta instancia')):''==K.previous_status&&(a('#icon-tracking').removeClass('i-tracking-n'),a('#icon-tracking').addClass('i-tracking-t'),a('#tip_ases_status').html('Se realiza seguimiento en esta instancia'))},dataType:'json',cache:'false',error:function error(K){console.log(K)}}).then(function(K){swal(K.title,K.msg,K.status)}))})}},update_tracking_status:function update_tracking_status(F,G,H,I){has_tracking_status=!1,!1==F?(has_tracking_status=I.validate_tracking_statuses(H),has_tracking_status.tracking_status&&swal({title:'\xBFEst\xE1 seguro/a de cambiar el estado?',text:'Se alternar\xE1 el perfil de Moodle asociado al estudiante al cual se el realiza seguimiento',type:'warning',showCancelButton:!0,confirmButtonColor:'#d51b23',confirmButtonText:'Si',cancelButtonText:'No',closeOnConfirm:!0,allowEscapeKey:!1},function(J){if(J){a('.input-tracking').prop('checked',!1),G.prop('checked',!0);var K=a('#id_ases').val(),L=G[0].id;L=L.split('_')[2],a.ajax({type:'POST',data:{func:'update_tracking_status',id_ases_student:K,id_academic_program:L},url:'../managers/student_profile/studentprofile_serverproc.php',success:function success(M){setTimeout(function(){swal(M.title,M.msg,M.status)},100)},dataType:'json',cache:'false',error:function error(M){setTimeout(function(){swal(M.title,M.msg,M.status)},100)}})}else F?G.prop('checked',!0):G.prop('checked',!1)})):G.prop('checked',!0)},validate_tracking_statuses:function validate_tracking_statuses(F){for(has_tracking_status=!1,i=0;i<F.length;i++)if(1==F[i].tracking_status){has_tracking_status=!0;break}return F[i]},get_url_parameters:function get_url_parameters(){for(var K,G=[],H=document.location.search.substring(1),I=H.split('&'),J=0;J<I.length;J++)K=I[J].split('='),G[K[0]]=K[1];return G},graph_radial:function graph_radial(){var F=document.getElementById('canvas_radial_graph').getContext('2d'),G,H,I,J,K;G=0==a('#individual_risk').attr('data-risk-level')?4:a('#individual_risk').attr('data-risk-level'),H=0==a('#familiar_risk').attr('data-risk-level')?4:a('#familiar_risk').attr('data-risk-level'),I=0==a('#academic_risk').attr('data-risk-level')?4:a('#academic_risk').attr('data-risk-level'),J=0==a('#economic_risk').attr('data-risk-level')?4:a('#economic_risk').attr('data-risk-level'),K=0==a('#life_risk').attr('data-risk-level')?4:a('#life_risk').attr('data-risk-level'),a('#modal_radial_graph').fadeIn(200);var L={labels:['Individual','Familiar','Acad\xE9mico','Econ\xF3mico','Vida universitaria'],datasets:[{data:[4-G,4-H,4-I,4-J,4-K],backgroundColor:'rgba(255, 99, 132, 0.4)',borderColor:['rgba(255,99,132,1)'],borderWidth:2,fontsize:12}]},N=new g(F,{type:'radar',data:L,options:{scale:{ticks:{beginAtZero:!0,min:0,max:3,stepSize:1,display:!1},pointLabels:{fontSize:12},scaleLabel:{fontsize:10}},legend:{display:!1}}})},edit_profile:function edit_profile(F){var G=a('#ficha_estudiante').serializeArray();a('#span-icon-edit').on('click',function(){a(this).hide(),a('#tip-edit').hide(),a('#span-icon-save-profile').show(),a('#tip-save').show(),a('#span-icon-cancel-edit').show(),a('#tip-cancel').show(),a('#tipo_doc').prop('disabled',!1),a('#num_doc').prop('readonly',!1),a('#icetex_status').prop('disabled',!1),a('#observacion').prop('readonly',!1),a('.select_statuses_program').prop('disabled',!1),a('.input_fields_general_tab').prop('readonly',!1),a('.input-tracking').prop('disabled',!1)}),a('#span-icon-cancel-edit').on('click',{form:G},function(H){swal({title:'\xBFDesea cancelar la edici\xF3n?',text:'Los cambios no guardados se perder\xE1n',type:'warning',showCancelButton:!0,confirmButtonColor:'#d51b23',confirmButtonText:'Si',cancelButtonText:'No',closeOnConfirm:!0,allowEscapeKey:!1},function(I){I&&(F.cancel_edition(),F.revert_changes(H.data.form))})}),a('#span-icon-save-profile').on('click',function(){var H=a('#ficha_estudiante').serializeArray(),I=F.validate_form(H);'error'==I.status?swal(I.title,I.msg,I.status):F.save_form_edit_profile(H,F)})},validate_form:function validate_form(F){for(field in F){var G={};switch(G.title='\xC9xito',G.msg='El formulario fue validado con \xE9xito',G.status='success',F[field].name){case'num_doc':case'tel_res':case'celular':case'tel_acudiente':if(h(F[field].value))return G.title='Error',G.status='error',G.msg='El campo '+F[field].name+' solo debe contener n\xFAmeros',G;;break;case'emailpilos':if(console.log(k(F[field].value)),!k(F[field].value))return G.title='Error',G.status='error',G.msg='El campo '+F[field].name+' no tiene el formato de un correo electr\xF3nico',G;;}}return G},save_form_edit_profile:function save_form_edit_profile(F,G){a.ajax({type:'POST',data:{func:'save_profile',form:F},url:'../managers/student_profile/studentprofile_serverproc.php',success:function success(H){swal(H.title,H.msg,H.status)},dataType:'json',cache:'false',error:function error(H){swal(H.title,H.msg,H.status)}}),G.cancel_edition()},cancel_edition:function cancel_edition(){a('#span-icon-cancel-edit').hide(),a('#tip-cancel').hide(),a('#span-icon-save-profile').hide(),a('#tip-save').hide(),a('#span-icon-edit').show(),a('#tip-edit').show(),a('#tipo_doc').prop('disabled',!0),a('#num_doc').prop('readonly',!0),a('#icetex_status').prop('disabled',!0),a('#observacion').prop('readonly',!0),a('.select_statuses_program').prop('disabled',!0),a('.input_fields_general_tab').prop('readonly',!0),a('.input-tracking').prop('disabled',!0)},revert_changes:function revert_changes(F){for(field in F)a('#'+F[field].name).val(F[field].value)}}});